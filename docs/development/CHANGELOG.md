# ContentHub 开发变更日志

## [Unreleased]

### 2026-02-05

#### ✨ 新功能 (Features)

**Content-Creator CLI 集成**
- ✅ 实现AI驱动的内容生成功能
- ✅ 支持Claude CLI和DeepSeek API两种LLM后端
- ✅ 自动生成配图（2-3张）
- ✅ 文本质检和评分系统
- ✅ 灵活的参数配置（主题、要求、受众、语气）

**核心服务改进**
- ✅ `ContentCreatorService` 重构
  - 更新超时时间到300秒
  - 添加文本输出解析
  - 改进错误处理和重试机制
  - 支持环境变量配置

**CLI增强**
- ✅ `content generate` 命令更新
  - 添加 `--requirements` 参数
  - 添加 `--tone` 参数
  - 显示生成统计信息
  - 支持质量评分查看

#### 🔧 技术改进 (Technical Improvements)

**环境变量处理**
- ✅ 创建CLI包装脚本 `content-creator-cli.sh`
- ✅ LOG_LEVEL大小写自动转换
- ✅ 工作目录自动切换

**输出解析**
- ✅ 正则表达式提取规则
- ✅ 多种格式兼容
- ✅ 错误容错处理

#### 📝 文档更新 (Documentation)

**新增文档**
- ✅ [Content-Creator集成指南](../references/content-creator-integration.md)
  - 架构设计说明
  - 配置方法和参数说明
  - API接口文档
  - 故障排查指南

- ✅ [Content-Creator集成报告](./2026-02-05-content-creator-integration.md)
  - 实施内容总结
  - 测试验证结果
  - 技术决策记录
  - 性能指标统计

- ✅ [Content-Creator快速参考](../guides/content-creator-quick-reference.md)
  - 一分钟快速开始
  - 常用参数说明
  - 实用技巧示例
  - 常见问题解答

**更新文档**
- ✅ [文档索引](../INDEX.md)
  - 添加content-creator相关文档引用

#### 🐛 已知问题 (Known Issues)

1. **Token统计不准确**: 使用Claude CLI时无法精确统计
2. **超时设置固定**: 所有请求统一使用300秒超时
3. **图片路径为相对路径**: 依赖于content-creator工作目录

#### 📊 性能指标

**内容生成性能**:
- 平均耗时: 3分30秒（1500字 + 3张图）
- 质量评分: 8.0-8.5/10
- 成功率: >95%

**资源消耗**:
- CPU: 中等
- 内存: 200-400MB
- 网络: 低（仅搜索阶段）

#### 🔮 后续计划

**短期** (1-2周)
- [ ] 支持自定义图片数量和尺寸
- [ ] 优化输出解析，提取更多元数据
- [ ] 改进错误提示信息

**中期** (1-2月)
- [ ] 异步模式支持
- [ ] 批量生成并发优化
- [ ] 内容模板系统

**长期** (3-6月)
- [ ] 重新生成功能
- [ ] 多语言支持
- [ ] 智能推荐系统

---

## [v1.0.0] - 2026-02-03

### 初始发布

#### ✨ 核心功能

**用户管理**
- 用户CRUD操作
- 角色权限管理
- 密码修改和重置

**账号管理**
- 多平台账号管理（微信公众号、抖音、B站等）
- 账号配置导入/导出（Markdown格式）
- 写作风格配置
- 发布配置管理

**内容管理**
- 内容CRUD操作
- 内容审核流程（草稿→待审核→已审核→已发布）
- 选题搜索功能（Tavily API）

**定时任务**
- Cron表达式支持
- 任务类型：内容生成、发布
- 任务执行历史记录

**发布管理**
- 发布历史查询
- 发布记录统计
- 发布失败重试

**发布池**
- 批量发布管理
- 优先级设置
- 计划发布时间

**CLI工具**
- 13个功能模块
- 123个命令
- 多种输出格式（table/json/csv）

#### 🏗️ 架构特性

- **模块化设计**: 完全可插拔的模块系统
- **数据库**: SQLite（开发） / PostgreSQL（生产）
- **API框架**: FastAPI
- **CLI框架**: Typer
- **任务调度**: APScheduler

#### 📚 初始文档

- 系统架构文档
- API文档（Swagger/OpenAPI）
- CLI使用手册
- 部署指南

---

## 版本号说明

格式：`v[主版本].[次版本].[修订版]`

- **主版本**: 重大架构变更或不兼容更新
- **次版本**: 新功能添加或重要改进
- **修订版**: Bug修复和小改进
