# 页面交互逻辑梳理与测试计划

## 任务概述
对 ContentHub 项目的前端页面进行全面分析，梳理每个页面的交互逻辑和页面间的跳转关系，并基于此生成详细的测试计划，使用 chrome-devtools 工具逐个页面进行自动化测试。

**测试环境**:
- 前端端口: 3010
- 后端端口: 8010

## 阶段划分

### 阶段 1: 页面结构分析 [✓ 已完成]
- **目标**: 分析前端项目结构，识别所有页面和路由
- **详细描述**:
  1. 读取前端路由配置文件
  2. 识别所有页面组件
  3. 梳理页面层次结构
  4. 生成页面清单
- **完成标准**:
  - 输出完整的页面列表
  - 每个页面有对应的组件路径
  - 识别页面路由映射关系
- **执行结果**: 已识别 15 个页面，包括 2 个公开页面和 13 个认证页面。详细报告见下文。
- **状态**: 已完成

#### 阶段 1 执行结果

**页面清单**:

1. **公开页面** (2个)
   - 登录页 (`/login`) - `Login.vue`
   - 访问拒绝页 (`/403`) - `403.vue`

2. **核心业务页面** (7个，所有用户可访问)
   - 仪表盘 (`/`) - `Dashboard.vue`
   - 账号管理 (`/accounts`) - `AccountManage.vue`
   - 内容管理 (`/content`) - `ContentManage.vue`
   - 内容详情 (`/content/:id`) - `ContentDetail.vue`
   - 发布管理 (`/publisher`) - `PublishManage.vue`
   - 定时任务 (`/scheduler`) - `SchedulerManage.vue`
   - 发布池 (`/publish-pool`) - `PublishPool.vue`

3. **管理员专属页面** (6个)
   - 用户管理 (`/users`) - `UserManage.vue`
   - 客户管理 (`/customers`) - `CustomerManage.vue`
   - 平台管理 (`/platforms`) - `PlatformManage.vue`
   - 系统配置 (`/config`) - `SystemConfig.vue`
   - 写作风格管理 (`/writing-styles`) - `WritingStyleManage.vue`
   - 内容主题管理 (`/content-themes`) - `ContentThemeManage.vue`

**权限系统**: 基于 RBAC，使用细粒度权限控制（如 `account:read`, `content:read`）

### 阶段 2: 页面交互逻辑梳理 [✓ 已完成]
- **目标**: 分析每个页面的交互元素和行为
- **详细描述**:
  1. 逐个读取页面组件代码
  2. 识别每个页面的交互元素（按钮、表单、链接等）
  3. 分析事件处理逻辑
  4. 梳理页面状态管理
  5. 识别 API 调用
- **完成标准**:
  - 每个页面的交互元素清单
  - 事件处理逻辑说明
  - API 调用清单
- **执行结果**: 已完成所有 15 个页面的交互逻辑分析，包括：
  - 每个页面的交互元素识别
  - 事件处理逻辑分析
  - API 调用清单
  - 状态管理说明
- **状态**: 已完成

#### 阶段 2 执行结果

**关键发现**:
1. **通用交互模式**: 大多数管理页面遵循相同的表格操作模式（搜索-列表-操作-对话框）
2. **权限控制**: 使用 v-permission 和 v-role 指令实现细粒度权限控制
3. **状态管理**: 主要使用 Pinia 进行状态管理，包含 user、app、account、content 等 store
4. **API 架构**: 所有 API 调用统一使用 request.js 封装，支持请求缓存
5. **表单验证**: 使用 composables/useFormValidation.js 提供通用验证规则

**详细报告**: 每个页面的交互逻辑文档已生成，包含：
- 交互元素清单（按钮、输入框、链接等）
- 事件处理函数分析
- API 调用清单
- 状态管理说明
- 权限控制逻辑

### 阶段 3: 页面跳转关系分析 [✓ 已完成]
- **目标**: 梳理页面间的跳转关系和导航流程
- **详细描述**:
  1. 分析页面间的导航链接
  2. 识别程序化路由跳转
  3. 梳理用户操作流程
  4. 生成页面跳转关系图
- **完成标准**:
  - 页面跳转关系矩阵
  - 用户导航流程图
  - 关键用户路径说明
- **执行结果**: 已完成页面跳转关系分析，包括：
  - 导航菜单结构分析
  - 路由守卫逻辑梳理
  - 程序化路由跳转识别
  - 页面跳转关系矩阵
  - 关键用户路径说明
- **状态**: 已完成

#### 阶段 3 执行结果

**关键发现**:
1. **动态导航菜单**: 根据用户权限动态生成，普通用户和管理员看到不同的菜单项
2. **路由守卫机制**: 认证守卫、权限守卫、角色守卫三层保护
3. **重定向机制**: 登录成功后根据 `redirect` 参数跳转到原目标页面
4. **弹窗模式**: 编辑、预览等操作采用弹窗而非页面跳转
5. **权限控制**: 使用 v-permission 和 v-role 指令实现细粒度权限控制

**页面跳转关系矩阵**: 已生成完整的跳转关系矩阵，覆盖所有页面间的跳转规则

**关键用户路径**:
- 新用户注册流程
- 内容创作流程
- 管理员配置流程
- 退出登录流程

### 阶段 4: 测试计划生成 [✓ 已完成]
- **目标**: 为每个页面生成详细的测试计划
- **详细描述**:
  1. 基于交互逻辑设计测试用例
  2. 定义测试步骤和预期结果
  3. 识别测试数据和前置条件
  4. 设计异常场景测试
- **完成标准**:
  - 每个页面的详细测试用例
  - 测试数据准备清单
  - 异常场景覆盖
- **执行结果**: 已生成完整的测试计划文档（TEST_PLAN.md），包含：
  - 18 个测试场景
  - 100+ 个测试用例
  - 测试数据准备清单
  - 测试结果记录模板
- **状态**: 已完成

#### 阶段 4 执行结果

**测试计划文档**: `/Users/Oychao/Documents/Projects/content-hub/TEST_PLAN.md`

**测试场景覆盖**:
1. 登录页测试（9 个用例）
2. 仪表盘测试（4 个用例）
3. 账号管理测试（11 个用例）
4. 内容管理测试（9 个用例）
5. 内容详情测试（6 个用例）
6. 发布管理测试（4 个用例）
7. 定时任务测试（5 个用例）
8. 发布池测试（4 个用例）
9-15. 管理员页面测试
16. 权限控制测试（3 个用例）
17. 页面跳转测试（4 个用例）
18. 异常场景测试（4 个用例）

**测试执行顺序**: 已规划 5 个阶段的测试执行顺序

### 阶段 5: Chrome DevTools 测试脚本开发 [进行中]
- **目标**: 使用 chrome-devtools MCP 开发页面测试脚本
- **详细描述**:
  1. 熟悉 chrome-devtools MCP 的 API
  2. 为每个页面编写测试脚本
  3. 实现页面导航测试
  4. 实现交互元素测试
  5. 实现表单提交测试
- **完成标准**:
  - 每个页面的自动化测试脚本
  - 测试执行框架
  - 测试结果收集机制
- **执行结果**: 待完成
- **状态**: 进行中

### 阶段 6: 测试执行与结果记录
- **目标**: 逐个执行测试并记录结果
- **详细描述**:
  1. 启动前端和后端服务
  2. 使用 chrome-devtools 执行测试
  3. 记录测试结果
  4. 收集错误信息
  5. 生成测试报告
- **完成标准**:
  - 所有测试用例执行完毕
  - 详细的测试结果报告
  - 问题清单和建议
- **执行结果**: 待完成
- **状态**: 待开始

## 整体进展
- 已完成: 0 / 6
- 当前阶段: 页面结构分析

## 重要备注
- 前端使用 Vue 3 + Vite + Element Plus
- 后端使用 FastAPI
- 需要确保测试环境可访问
- 测试过程中需要登录态的页面要先处理认证
