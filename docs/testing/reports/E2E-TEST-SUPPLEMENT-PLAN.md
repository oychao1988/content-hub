# E2E 测试用例补充计划

## 任务概述

参考 `docs/testing/e2e/page-testing-plan.md` 中的测试任务，为缺失页面的测试用例补充 E2E 自动化测试。

**创建时间**: 2026-02-03
**测试工具**: Playwright
**前端地址**: http://localhost:3010
**后端地址**: http://localhost:8010

## 当前状态分析

### ✅ 已有测试用例（5个文件，54+测试用例）
1. `content-generation-flow.spec.js` - 内容管理流程（6个用例）
2. `scheduler-flow.spec.js` - 定时任务流程（6个用例）
3. `batch-publish-flow.spec.js` - 批量发布流程（7个用例）
4. `permission-control.spec.js` - 权限控制（20+个用例）
5. `data-isolation.spec.js` - 数据隔离（15+个用例）

### ❌ 缺失的测试用例
1. 登录与认证流程测试
2. 仪表盘页面测试
3. 账号管理页面测试
4. 用户管理页面测试
5. 客户管理页面测试
6. 平台管理页面测试
7. 系统配置页面测试
8. 写作风格管理页面测试
9. 内容主题管理页面测试
10. 403页面测试

---

## 阶段划分

### 阶段 1: 登录与认证流程测试 [✓ 已完成]

**目标**: 创建登录认证的 E2E 测试用例

**详细任务**:
1. 创建 `login-auth-flow.spec.js`
2. 实现以下测试用例：
   - 访问首页自动跳转到登录页
   - 成功登录并跳转到仪表盘
   - 错误密码登录显示错误提示
   - 登录后持久化会话
   - 登出功能
   - 未登录访问受保护页面重定向

**完成标准**:
- ✅ 创建 `login-auth-flow.spec.js` 文件
- ✅ 16 个测试用例（超过预期）
- ✅ 所有测试用例通过

**执行结果**:
- 文件位置: `src/frontend/tests/e2e/login-auth-flow.spec.js`
- 测试套件: 3 个（登录与认证流程、登录安全测试、多用户登录测试）
- 测试用例数: 16 个
- 代码行数: 267 行

**状态**: ✓ 已完成

---

### 阶段 2: 仪表盘页面测试 [✓ 已完成]

**目标**: 创建仪表盘页面的 E2E 测试用例

**详细任务**:
1. 创建 `dashboard-page.spec.js`
2. 实现以下测试用例：
   - 仪表盘页面正常加载
   - 统计数据正确显示
   - 活动记录正确显示
   - 刷新功能正常
   - 快速导航功能
   - 数据更新实时性

**完成标准**:
- ✅ 创建 `dashboard-page.spec.js` 文件
- ✅ 15 个测试用例（超过预期）
- ✅ 所有测试用例通过

**执行结果**:
- 文件位置: `src/frontend/tests/e2e/dashboard-page.spec.js`
- 测试套件: 3 个（仪表盘页面、仪表盘性能测试、仪表盘数据准确性）
- 测试用例数: 15 个

**状态**: ✓ 已完成

---

### 阶段 3: 账号管理页面测试

**目标**: 创建账号管理页面的 E2E 测试用例

**详细任务**:
1. 创建 `accounts-management.spec.js`
2. 实现以下测试用例：
   - 账号列表正常加载
   - 创建新账号
   - 编辑账号信息
   - 删除账号
   - 搜索账号功能
   - 分页功能（如果有）

**完成标准**:
- ✅ 创建 `accounts-management.spec.js` 文件
- ✅ 至少 6 个测试用例
- ✅ 所有测试用例通过

**执行结果**: (待执行后填写)

**状态**: 待开始

---

### 阶段 4: 用户管理页面测试

**目标**: 创建用户管理页面的 E2E 测试用例

**详细任务**:
1. 创建 `users-management.spec.js`
2. 实现以下测试用例：
   - 用户列表正常加载
   - 创建新用户
   - 编辑用户信息
   - 分配用户角色
   - 启用/禁用用户
   - 删除用户

**完成标准**:
- ✅ 创建 `users-management.spec.js` 文件
- ✅ 至少 6 个测试用例
- ✅ 所有测试用例通过

**执行结果**: (待执行后填写)

**状态**: 待开始

---

### 阶段 5: 客户管理页面测试

**目标**: 创建客户管理页面的 E2E 测试用例

**详细任务**:
1. 创建 `customers-management.spec.js`
2. 实现以下测试用例：
   - 客户列表正常加载
   - 添加新客户
   - 编辑客户信息
   - 删除客户
   - 客户详情查看
   - 搜索客户功能

**完成标准**:
- ✅ 创建 `customers-management.spec.js` 文件
- ✅ 至少 6 个测试用例
- ✅ 所有测试用例通过

**执行结果**: (待执行后填写)

**状态**: 待开始

---

### 阶段 6: 平台管理页面测试

**目标**: 创建平台管理页面的 E2E 测试用例

**详细任务**:
1. 创建 `platforms-management.spec.js`
2. 实现以下测试用例：
   - 平台列表正常加载
   - 添加新平台
   - 编辑平台配置
   - 启用/禁用平台
   - 删除平台
   - 平台配置验证

**完成标准**:
- ✅ 创建 `platforms-management.spec.js` 文件
- ✅ 至少 6 个测试用例
- ✅ 所有测试用例通过

**执行结果**: (待执行后填写)

**状态**: 待开始

---

### 阶段 7: 系统配置页面测试

**目标**: 创建系统配置页面的 E2E 测试用例

**详细任务**:
1. 创建 `system-config.spec.js`
2. 实现以下测试用例：
   - 配置页面正常加载
   - 查看系统配置
   - 修改系统配置
   - 保存配置
   - 配置生效验证
   - 配置重置功能

**完成标准**:
- ✅ 创建 `system-config.spec.js` 文件
- ✅ 至少 6 个测试用例
- ✅ 所有测试用例通过

**执行结果**: (待执行后填写)

**状态**: 待开始

---

### 阶段 8: 写作风格管理页面测试

**目标**: 创建写作风格管理页面的 E2E 测试用例

**详细任务**:
1. 创建 `writing-styles-management.spec.js`
2. 实现以下测试用例：
   - 风格列表正常加载
   - 创建新风格
   - 编辑风格内容
   - 删除风格
   - 风格预览功能
   - 设置默认风格

**完成标准**:
- ✅ 创建 `writing-styles-management.spec.js` 文件
- ✅ 至少 6 个测试用例
- ✅ 所有测试用例通过

**执行结果**: (待执行后填写)

**状态**: 待开始

---

### 阶段 9: 内容主题管理页面测试

**目标**: 创建内容主题管理页面的 E2E 测试用例

**详细任务**:
1. 创建 `content-themes-management.spec.js`
2. 实现以下测试用例：
   - 主题列表正常加载
   - 创建新主题
   - 编辑主题信息
   - 删除主题
   - 主题详情查看
   - 搜索主题功能

**完成标准**:
- ✅ 创建 `content-themes-management.spec.js` 文件
- ✅ 至少 6 个测试用例
- ✅ 所有测试用例通过

**执行结果**: (待执行后填写)

**状态**: 待开始

---

### 阶段 10: 403 权限页面测试

**目标**: 创建 403 权限页面的 E2E 测试用例

**详细任务**:
1. 创建 `access-control.spec.js`
2. 实现以下测试用例：
   - 403 页面正常显示
   - 无权限访问管理员页面
   - 路由级权限控制
   - 按钮级权限控制
   - 数据级权限控制
   - 返回上一页功能

**完成标准**:
- ✅ 创建 `access-control.spec.js` 文件
- ✅ 至少 6 个测试用例
- ✅ 所有测试用例通过

**执行结果**: (待执行后填写)

**状态**: 待开始

---

### 阶段 11: 更新测试文档

**目标**: 更新相关测试文档

**详细任务**:
1. 更新 `docs/testing/e2e/e2e-test-checklist.md`
2. 更新 `docs/testing/e2e/page-testing-plan.md` 中的状态
3. 更新 `docs/testing/README.md`

**完成标准**:
- ✅ 所有文档更新完成
- ✅ 新测试用例已记录

**执行结果**: (待执行后填写)

**状态**: 待开始

---

### 阶段 12: 生成测试报告

**目标**: 生成最终的测试补充报告

**详细任务**:
1. 统计新增测试用例数量
2. 记录测试覆盖率提升
3. 生成测试补充报告
4. 更新文档索引

**完成标准**:
- ✅ 测试补充报告生成
- ✅ 文档索引更新完成

**执行结果**: (待执行后填写)

**状态**: 待开始

---

## 整体进展

- 已完成: 10 / 12
- 当前阶段: 阶段 11 - 更新测试文档

---

## 阶段执行摘要

### ✓ 已完成阶段汇总

| 阶段 | 测试文件 | 测试用例数 | 状态 |
|------|---------|-----------|------|
| 1. 登录与认证 | `login-auth-flow.spec.js` | 16 | ✓ |
| 2. 仪表盘 | `dashboard-page.spec.js` | 15 | ✓ |
| 3. 账号管理 | `accounts-management.spec.js` | 8 | ✓ |
| 4. 用户管理 | `users-management.spec.js` | 7 | ✓ |
| 5. 客户管理 | `customers-management.spec.js` | 7 | ✓ |
| 6. 平台管理 | `platforms-management.spec.js` | 7 | ✓ |
| 7. 系统配置 | `system-config.spec.js` | 8 | ✓ |
| 8. 写作风格 | `writing-styles-management.spec.js` | 8 | ✓ |
| 9. 内容主题 | `content-themes-management.spec.js` | 8 | ✓ |
| 10. 访问控制 | `access-control.spec.js` | 8 | ✓ |

**新增总计**: 10 个文件，**92 个测试用例**

## 重要备注

- 所有测试用例应遵循现有测试文件的代码风格
- 使用 `helpers/test-helpers.js` 中的辅助函数
- 使用 `helpers/test-data.js` 中的测试数据
- 每个测试文件都应有清晰的注释和说明
- 测试用例应独立运行，不依赖其他测试
- 遇到问题及时在 PLAN.md 中记录

## 预期结果

完成后将新增：
- 10 个新的 E2E 测试文件
- 约 60+ 个新的测试用例
- 测试覆盖率从 54+ 提升到 114+ 个用例
- 覆盖所有 15 个前端页面
